import java.io.*;
import java.util.Scanner;


/*
 * @author - Uður Erdem Seyfi
 * @version - 11.05.2019
 */

public class BoardUpdater{
    /*
     * Method that updates the Board.java code itself
     * @param droneName1 - name of the player's drone
     * @param droneName2 - name of the enemy's drone
     */
    public static void update(String droneName1, String droneName2){
        File data = new File( "UpdatableBoard.java");
        try { 
            FileWriter writer = new FileWriter( "UpdatableBoard.java", false); 
            BufferedWriter bWriter = new BufferedWriter( writer); 
            String codeString = readFile("UpdatableBoardCode.txt");
            codeString = codeString.replace("super(...)", "super(new "+droneName1+"(100,100), new " +droneName2+"(100,100))");
            bWriter.write( codeString); 
            bWriter.flush(); 
            bWriter.close();
            
            DroneCompiler compiler = new DroneCompiler();
            compiler.compile("UpdatableBoard.java");
            // System.out.println( compiler.getDiagnosticsInfo() );
        } catch (Exception exc) {
            System.out.println("error update");
        }   
    }
    
    /*
     * Method that 
     * 
     */
    private static String readFile(String pathname) throws IOException {
        File file = new File(pathname);
        try{
            // String 
            String fileText = "", line = ""; 
            
            // File reader 
            FileReader fileReader = new FileReader(file); 
            // Buffered reader 
            BufferedReader bufferedReader = new BufferedReader(fileReader); 
            
            // Initilize line
            line = bufferedReader.readLine(); 
            // Take the input from the file 
            while (line != null) { 
                fileText = fileText + line + "\n"; 
                line = bufferedReader.readLine(); 
            } 
            
            return fileText;
        } catch (Exception evt){
            return null;
            // JOptionPane.showMessageDialog(null, evt.getMessage());
        }
       
    }
}